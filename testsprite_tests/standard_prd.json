{
  "meta": {
    "project": "Mafilu Streaming Platform",
    "date": "2025-12-22",
    "prepared_by": "Software Development Manager"
  },
  "product_overview": "Mafilu is a curated streaming platform designed to empower independent filmmakers by providing a premium, art-house style environment that connects indie creators with cinephiles seeking unique storytelling experiences. It balances quality, monetization, and content curation to create a specialized \"Indie-Netflix\".",
  "core_goals": [
    "Empower independent filmmakers by offering a dedicated platform for distribution and monetization.",
    "Provide viewers with a curated, high-quality cinematic streaming experience.",
    "Support diverse user roles including viewers, producers, and administrators with tailored interfaces and functionality.",
    "Enable a subscription-based revenue model with tiered access and revenue sharing for producers.",
    "Ensure robust content management, including upload, approval, and analytics for producers and admins.",
    "Deliver a premium, immersive UI/UX that reflects an art-house cinema atmosphere."
  ],
  "key_features": [
    "Complete authentication flow with role-based onboarding and profile management using Supabase.",
    "Cinematic homepage featuring hero sections and auto-rotating movie carousels with categorized genre rows.",
    "Advanced movie discovery with filtering by genre, year, popularity, and real-time search results.",
    "Adaptive bitrate video streaming via Bunny.net with a full-width cinematic player, including social sharing, like, watchlist, and recommendations.",
    "Producer Studio dashboard for content upload, metadata management, real-time analytics, earnings tracking, and payout management.",
    "Subscription management with multiple tiers using Stripe integration, supporting different device counts and video quality levels.",
    "Admin Panel for content moderation, user management, system analytics, and configuration.",
    "Resumable video uploads with automatic transcoding and approval workflow.",
    "Reusable UI components styled with Tailwind CSS and Framer Motion for a fluid cinematic experience.",
    "Security measures including row-level security, authorization middleware, and content protection through signed URLs."
  ],
  "user_flow_summary": [
    "User signs up or logs in selecting their role as Viewer or Producer, completing onboarding with preferences.",
    "Viewers browse curated home page or use advanced filters/search to find movies.",
    "Viewers watch movies on a cinematic player with social actions like liking and adding to watchlist.",
    "Producers upload new video content through an upload wizard, enter metadata, and submit for admin approval.",
    "Producers access dashboard to view analytics and earnings, manage uploads, and customize profile.",
    "Viewers manage subscriptions and account settings with options to upgrade or cancel their plans.",
    "Admins review submitted movies, moderate users, and oversee platform analytics and payouts.",
    "Subscription payments are processed through Stripe, with webhooks handling lifecycle events."
  ],
  "validation_criteria": [
    "User authentication processes function correctly with role assignment and email verification.",
    "Content upload supports resumable uploads and transitions through statuses: draft, pending, published.",
    "Video player streams adaptively with playback progress saving and a minimal buffer start time (<2s).",
    "Browsing and searching yield accurate, real-time filtered results by genre, popularity, and keywords.",
    "Producer dashboards correctly display analytics data, earnings projections, and payout history.",
    "Subscription payments complete successfully and update user access accordingly.",
    "Admin panel enforces correct moderation permissions and reflects real-time system analytics.",
    "UI conforms to the branded dark, cinematic style with consistent typography and responsive layouts.",
    "Security enforced at the database and API level restricts unauthorized data access or actions.",
    "All critical APIs respond within performance targets and maintain high availability and resilience."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "Next.js 16",
      "React 19",
      "Tailwind CSS 4",
      "Supabase",
      "PostgreSQL",
      "Bunny.net",
      "Stripe",
      "Redis",
      "Framer Motion",
      "Lucide React"
    ],
    "features": [
      {
        "name": "Authentication System",
        "description": "Complete authentication flow with login, signup, password reset, and email confirmation",
        "files": [
          "src/app/(auth)/login/page.tsx",
          "src/app/(auth)/signup/page.tsx",
          "src/app/(auth)/forgot-password/page.tsx",
          "src/app/(auth)/reset-password/page.tsx",
          "src/lib/supabase/client.ts",
          "src/lib/supabase/server.ts",
          "src/lib/supabase/middleware.ts"
        ]
      },
      {
        "name": "Homepage",
        "description": "Cinematic homepage with hero section, auto-rotating movie carousel, and categorized movie rows",
        "files": [
          "src/app/page.tsx",
          "src/app/layout.tsx"
        ]
      },
      {
        "name": "Navigation Bar",
        "description": "Responsive navbar with scroll behavior, user menu, and mobile menu",
        "files": [
          "src/components/layout/navbar.tsx"
        ]
      },
      {
        "name": "Browse Movies",
        "description": "Movie discovery page with filtering by genre and search functionality",
        "files": [
          "src/app/browse/page.tsx",
          "src/app/browse/browse-client.tsx"
        ]
      },
      {
        "name": "Watch Movie",
        "description": "Movie player page with video streaming, movie details, related movies, and actions",
        "files": [
          "src/app/watch/[id]/page.tsx"
        ]
      },
      {
        "name": "Movie Actions",
        "description": "Like, watchlist, and share functionality for movies",
        "files": [
          "src/components/video/movie-actions.tsx",
          "src/app/api/like/route.ts",
          "src/app/api/watchlist/route.ts"
        ]
      },
      {
        "name": "View Counter",
        "description": "Track and display movie view counts",
        "files": [
          "src/components/video/view-counter.tsx",
          "src/app/api/videos/[id]/view/route.ts"
        ]
      },
      {
        "name": "Related Movies",
        "description": "Display related movies based on genre",
        "files": [
          "src/components/video/related-movies.tsx"
        ]
      },
      {
        "name": "Watchlist",
        "description": "User's personal watchlist page",
        "files": [
          "src/app/watchlist/page.tsx"
        ]
      },
      {
        "name": "Subscription Management",
        "description": "Subscription pages for premium membership with Stripe integration",
        "files": [
          "src/app/subscription/page.tsx",
          "src/app/subscription/success/page.tsx",
          "src/app/subscription/cancel/page.tsx",
          "src/app/api/checkout/route.ts",
          "src/app/api/webhooks/stripe/route.ts",
          "src/lib/payment/stripe.ts"
        ]
      },
      {
        "name": "Producer Dashboard",
        "description": "Dashboard for filmmakers to manage movies, view analytics, and track earnings",
        "files": [
          "src/app/(producer)/dashboard/page.tsx",
          "src/app/(producer)/movies/page.tsx",
          "src/app/(producer)/movies/new/page.tsx",
          "src/app/(producer)/movies/[id]/page.tsx",
          "src/app/(producer)/movies/[id]/edit/page.tsx",
          "src/app/(producer)/earnings/page.tsx",
          "src/app/(producer)/settings/page.tsx"
        ]
      },
      {
        "name": "Admin Panel",
        "description": "Admin interface for reviewing movies, managing users, and viewing analytics",
        "files": [
          "src/app/(admin)/admin/page.tsx",
          "src/app/(admin)/admin/movies/page.tsx",
          "src/app/(admin)/admin/movies/[id]/page.tsx",
          "src/app/(admin)/admin/movies/[id]/movie-review-client.tsx",
          "src/app/(admin)/admin/users/page.tsx",
          "src/app/(admin)/admin/analytics/page.tsx",
          "src/app/(admin)/admin/settings/page.tsx"
        ]
      },
      {
        "name": "Video Upload",
        "description": "Video upload functionality with Bunny.net integration",
        "files": [
          "src/app/api/videos/upload/route.ts",
          "src/app/api/videos/[id]/upload/route.ts",
          "src/lib/bunny/index.ts",
          "src/lib/bunny/stream.ts"
        ]
      },
      {
        "name": "UI Components",
        "description": "Reusable UI components including button, card, input, and badge",
        "files": [
          "src/components/ui/button.tsx",
          "src/components/ui/card.tsx",
          "src/components/ui/input.tsx",
          "src/components/ui/badge.tsx"
        ]
      },
      {
        "name": "Account Management",
        "description": "User account settings and profile page",
        "files": [
          "src/app/account/page.tsx"
        ]
      },
      {
        "name": "Featured Movies API",
        "description": "API endpoint for fetching featured movies",
        "files": [
          "src/app/api/movies/featured/route.ts"
        ]
      },
      {
        "name": "Health Check",
        "description": "API endpoint for health monitoring",
        "files": [
          "src/app/api/health/route.ts"
        ]
      },
      {
        "name": "Payment Integration",
        "description": "Payment processing with Stripe and PayTR integration",
        "files": [
          "src/lib/payment/index.ts",
          "src/lib/payment/stripe.ts",
          "src/lib/payment/paytr.ts",
          "src/lib/payment/types.ts"
        ]
      },
      {
        "name": "Styling System",
        "description": "Global CSS with custom properties and Tailwind configuration",
        "files": [
          "src/app/globals.css"
        ]
      }
    ]
  }
}
